import{r as e}from"./vendor.798de7ce.js";import{u as t,C as n,D as l,b as o,c,d as r,e as a}from"./index.90c0f70b.js";var u="_row_so8yo_1",s="_value_so8yo_21",m="_button_so8yo_37",d="_textbox_so8yo_69",i="_asyncButton_so8yo_101 _button_so8yo_37",p="_normalButton_so8yo_113 _button_so8yo_37";function E(){const l=t(n),{state:o,moduleComputed:c,mr:r}=l;return console.log(r),e.createElement("div",null,e.createElement("div",{className:u},e.createElement("button",{className:m,"aria-label":"Increment value",onClick:r.increment},"+"),e.createElement("span",{className:s},o.value),e.createElement("span",{className:s},"doubleCount: ",c.doubleCount),e.createElement("button",{className:m,"aria-label":"Decrement value",onClick:r.decrementOne},"-")),e.createElement("div",{className:u},e.createElement("input",{className:d,"aria-label":"Set increment amount",value:o.toInc,onChange:e=>r.setState({toInc:Number(e.target.value)||0})}),e.createElement("button",{className:m,onClick:r.increment},"Add Amount"),e.createElement("button",{className:i,onClick:r.incrementAsync},"Add Async"),e.createElement("button",{className:p,onClick:r.incrementBigValue},"Add Big Value")))}const b=e.memo((()=>{const l=t(n),[o,c]=e.useState(!0),{state:r,moduleComputed:a,renderCount:u}=l;return e.createElement("div",null,e.createElement("h2",null,"renderCount ",u),o?e.createElement(e.Fragment,null,e.createElement("span",null," value:",r.value),e.createElement("span",null," bigValue:",r.bigValue),e.createElement("span",null," doubleCount:",a.doubleCount)):"lost dep! module state change will not trigger CounterTip re-render",e.createElement("button",{onClick:()=>c(!o)},"switch CounterTip view"))}));var f=e.memo((function(){const{state:n,mr:o,moduleComputed:c}=t(l);return e.createElement("div",null,e.createElement("p",null,"一个使用了Demo模块的组件"),e.createElement("div",null,n.desc,e.createElement("br",null)," ",c.revesedDesc,e.createElement("button",{onClick:o.changeDesc},"call mr.changeDesc")))}));function C(e){return e.effect((()=>(e.mr.changeDesc(`componentDidMount ${Date.now()}`),()=>console.log("componentWillUnmount"))),[]),{foo:()=>console.log("call setttings.foo")}}var g=e.memo((function(){const{state:t,settings:n,mr:c}=o({module:l,setup:C});return e.createElement("div",null,e.createElement("p",null,"定义组件所属模块"),e.createElement("p",null,"定义setup"),e.createElement("div",null,t.desc,e.createElement("button",{onClick:n.foo},"call settings.foo"),e.createElement("button",{onClick:c.changeDesc},"call mr.changeDesc")))}));const v={borderStyle:e=>e.isOpen?{border:"6px solid red"}:{border:"6px solid blue"}};function y(){return{isOpen:!0}}function h(e){return e.initState(y),e.computed(v),e.effect((()=>{e.mr.changeDesc(`componentDidMount ${Date.now()}`)}),[]),{toogleOpen:e.syncBool("isOpen")}}var D=e.memo((function(){const{state:t,settings:n,refComputed:c}=o({module:l,setup:h});return e.createElement("div",{style:c.borderStyle},e.createElement("p",null,"定义组件所属模块"),e.createElement("p",null,"定义setup, 初始化实例私有状态，并对其定义计算函数"),e.createElement("div",null,t.desc,e.createElement("button",{onClick:n.toogleOpen},"toogleOpen")))}));const _=[c,n],k={borderStyle:e=>e.isOpen?{border:"3px solid red"}:{border:"3px solid blue"}};function O(){return{isOpen:!0}}function S(e){return e.initState(O).computed(k),e.effect((()=>{e.mr.changeDesc(`componentDidMount ${Date.now()}`)}),[]),{toogleOpen:()=>e.syncBool("isOpen")}}var x=e.memo((function(){const{state:t,settings:n,refComputed:c,connectedState:r}=o({module:l,setup:S,connect:_});return e.createElement("div",{style:c.borderStyle},e.createElement("p",null,"定义组件所属模块"),e.createElement("p",null,"定义组件连接其他多个模块"),e.createElement("p",null,"定义setup, 初始化实例私有状态，并对其定义计算函数"),e.createElement("div",null,e.createElement("h3",null,"state.desc ",t.desc),e.createElement("h3",null,"cstate.Counter.value ",r.Counter.value),e.createElement("h3",null,"cstate.DemoCloned.desc ",r.DemoCloned.desc),e.createElement("button",{onClick:n.toogleOpen},"toogleOpen")))}));const M=[c,n],N={borderStyle:e=>e.isOpen?{border:"6px solid red"}:{border:"6px solid blue"}};function T(){return{isOpen:!0}}function w(e){return e.initState(T).computed(N),e.effect((()=>{e.mr.changeDesc(`componentDidMount ${Date.now()}`)}),[]),{toogleOpen:e.syncBool("isOpen")}}function B(e){return{columns:[{key:"id",dataIndex:"id",title:"id"},{key:"text",dataIndex:"text",title:"文案"},{key:"done",dataIndex:"done",title:"是否完成",render:e=>e?"done":"uncomplish"}],refreshTable:()=>{e.emit(["refreshTable","todoTable"])},fetchList:e=>a.DemoModel.fetchList(e)}}const A={CounterWithModel:()=>e.createElement("div",null,e.createElement(E,null),e.createElement(b,null)),D0Module:f,D1Module:g,D2ModuleRefCu:D,D3ModuleConn:x,D4ModuleConnRefCu:e.memo((function(){const{state:t,settings:n,refComputed:c,connectedState:r}=o({module:l,setup:w,connect:M});return e.createElement("div",{style:c.borderStyle},e.createElement("p",null,"定义组件所属模块"),e.createElement("p",null,"定义组件连接其他多个模块"),e.createElement("p",null,"定义setup, 初始化实例私有状态，并对其定义计算函数"),e.createElement("div",null,e.createElement("h3",null,"state.desc: ",t.desc),e.createElement("h3",null,"cstate.Counter.value: ",r.Counter.value),e.createElement("h3",null,"cstate.DemoCloned.desc: ",r.DemoCloned.desc),e.createElement("button",{onClick:n.toogleOpen},"toogleOpen")))})),DemoTable:e.memo((function(){const{settings:t}=o({setup:B});return e.createElement("div",null,e.createElement("button",{onClick:t.refreshTable},"refresh"),e.createElement(r,{tid:"todoTable",columns:t.columns,fetchFn:t.fetchList}))}))};function I(){return{selectedKey:"CounterWithModel"}}function K(e){return e.initState(I),{changeSelectedKey:t=>{const{key:n}=t.currentTarget.dataset;e.setState({selectedKey:n})}}}var V=e.memo((function(t){const{settings:n,state:l}=o({setup:K}),c=A[l.selectedKey],r=Object.keys(A).map((t=>e.createElement("button",{key:t,onClick:n.changeSelectedKey,"data-key":t},t)));return e.createElement("div",null,e.createElement("h1",null,"at path ",t.location.pathname),r,e.createElement(c,null))}));export default V;
