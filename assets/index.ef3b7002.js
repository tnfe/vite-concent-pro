import{k as e,u as t,K as n}from"./vendor.f72143a7.js";import{u as l,C as o,D as c,a,b as r,c as u}from"./index.c8c75ce7.js";var s="_row_so8yo_1",m="_value_so8yo_21",d="_button_so8yo_37",i="_textbox_so8yo_69",E="_asyncButton_so8yo_101 _button_so8yo_37",p="_normalButton_so8yo_113 _button_so8yo_37";function b(){const t=l(o),{state:n,moduleComputed:c,mr:a}=t;return console.log(a),e.createElement("div",null,e.createElement("div",{className:s},e.createElement("button",{className:d,"aria-label":"Increment value",onClick:a.increment},"+"),e.createElement("span",{className:m},n.value),e.createElement("span",{className:m},"doubleCount: ",c.doubleCount),e.createElement("button",{className:d,"aria-label":"Decrement value",onClick:a.decrementOne},"-")),e.createElement("div",{className:s},e.createElement("input",{className:i,"aria-label":"Set increment amount",value:n.toInc,onChange:e=>a.setState({toInc:Number(e.target.value)||0})}),e.createElement("button",{className:d,onClick:a.increment},"Add Amount"),e.createElement("button",{className:E,onClick:a.incrementAsync},"Add Async"),e.createElement("button",{className:p,onClick:a.incrementBigValue},"Add Big Value")))}const f=e.memo((()=>{const t=l(o),[n,c]=e.useState(!0),{state:a,moduleComputed:r,renderCount:u}=t;return e.createElement("div",null,e.createElement("h2",null,"renderCount ",u),n?e.createElement(e.Fragment,null,e.createElement("span",null," value:",a.value),e.createElement("span",null," bigValue:",a.bigValue),e.createElement("span",null," doubleCount:",r.doubleCount)):"lost dep! module state change will not trigger CounterTip re-render",e.createElement("button",{onClick:()=>c(!n)},"switch CounterTip view"))}));var C=()=>e.createElement("div",null,e.createElement(b,null),e.createElement(f,null));var v=e.memo((function(){const{state:t,mr:n,moduleComputed:o}=l(c);return e.createElement("div",null,e.createElement("p",null,"一个使用了Demo模块的组件"),e.createElement("div",null,t.desc,e.createElement("br",null)," ",o.revesedDesc,e.createElement("button",{onClick:n.changeDesc},"call mr.changeDesc")))}));function g(e){return e.effect((()=>(e.mr.changeDesc(`componentDidMount ${Date.now()}`),()=>console.log("componentWillUnmount"))),[]),{foo:()=>console.log("call setttings.foo")}}var y=e.memo((function(){const{state:n,settings:l,mr:o}=t({module:c,setup:g});return e.createElement("div",null,e.createElement("p",null,"定义组件所属模块"),e.createElement("p",null,"定义setup"),e.createElement("div",null,n.desc,e.createElement("button",{onClick:l.foo},"call settings.foo"),e.createElement("button",{onClick:o.changeDesc},"call mr.changeDesc")))}));const D={borderStyle:e=>e.isOpen?{border:"6px solid red"}:{border:"6px solid blue"}};function h(){return{isOpen:!0}}function k(e){return e.initState(h),e.computed(D),e.effect((()=>{e.mr.changeDesc(`componentDidMount ${Date.now()}`)}),[]),{toogleOpen:e.syncBool("isOpen")}}var _=e.memo((function(){const{state:n,settings:l,refComputed:o}=t({module:c,setup:k});return e.createElement("div",{style:o.borderStyle},e.createElement("p",null,"定义组件所属模块"),e.createElement("p",null,"定义setup, 初始化实例私有状态，并对其定义计算函数"),e.createElement("div",null,n.desc,e.createElement("button",{onClick:l.toogleOpen},"toogleOpen")))}));const O=[a,o],M={borderStyle:e=>e.isOpen?{border:"3px solid red"}:{border:"3px solid blue"}};function S(){return{isOpen:!0}}function x(e){return e.initState(S).computed(M),e.effect((()=>{e.mr.changeDesc(`componentDidMount ${Date.now()}`)}),[]),{toogleOpen:()=>e.syncBool("isOpen")}}var N=e.memo((function(){const{state:n,settings:l,refComputed:o,connectedState:a}=t({module:c,setup:x,connect:O});return e.createElement("div",{style:o.borderStyle},e.createElement("p",null,"定义组件所属模块"),e.createElement("p",null,"定义组件连接其他多个模块"),e.createElement("p",null,"定义setup, 初始化实例私有状态，并对其定义计算函数"),e.createElement("div",null,e.createElement("h3",null,"state.desc ",n.desc),e.createElement("h3",null,"cstate.Counter.value ",a.Counter.value),e.createElement("h3",null,"cstate.DemoCloned.desc ",a.DemoCloned.desc),e.createElement("button",{onClick:l.toogleOpen},"toogleOpen")))}));const T=[a,o],w={borderStyle:e=>e.isOpen?{border:"6px solid red"}:{border:"6px solid blue"}};function A(){return{isOpen:!0}}function B(e){return e.initState(A).computed(w),e.effect((()=>{e.mr.changeDesc(`componentDidMount ${Date.now()}`)}),[]),{toogleOpen:e.syncBool("isOpen")}}var I=e.memo((function(){const{state:n,settings:l,refComputed:o,connectedState:a}=t({module:c,setup:B,connect:T});return e.createElement("div",{style:o.borderStyle},e.createElement("p",null,"定义组件所属模块"),e.createElement("p",null,"定义组件连接其他多个模块"),e.createElement("p",null,"定义setup, 初始化实例私有状态，并对其定义计算函数"),e.createElement("div",null,e.createElement("h3",null,"state.desc: ",n.desc),e.createElement("h3",null,"cstate.Counter.value: ",a.Counter.value),e.createElement("h3",null,"cstate.DemoCloned.desc: ",a.DemoCloned.desc),e.createElement("button",{onClick:l.toogleOpen},"toogleOpen")))}));function K(e){return{columns:[{key:"id",dataIndex:"id",title:"id"},{key:"text",dataIndex:"text",title:"文案"},{key:"done",dataIndex:"done",title:"是否完成",render:e=>e?"done":"uncomplish"}],refreshTable:()=>{e.emit(["refreshTable","todoTable"])},fetchList:e=>u.DemoModel.fetchList(e)}}var R=e.memo((function(){const{settings:n}=t({setup:K});return e.createElement("div",null,e.createElement("button",{onClick:n.refreshTable},"refresh"),e.createElement(r,{tid:"todoTable",columns:n.columns,fetchFn:n.fetchList}))}));const{TabPane:V}=n;function W(){return{selectedKey:"CounterWithModel"}}function $(e){return e.initState(W),{changeSelectedKey:t=>{e.setState({selectedKey:t})}}}var L=e.memo((function(l){const{settings:o,state:c}=t({setup:$});return e.createElement("div",null,e.createElement(n,{defaultActiveKey:"1",onChange:e=>{o.changeSelectedKey(e)}},e.createElement(V,{tab:"CounterWithModel",key:"CounterWithModel"},e.createElement(C,null)),e.createElement(V,{tab:"D0Module",key:"D0Module"},e.createElement(v,null)),e.createElement(V,{tab:"D1Module",key:"D1Module"},e.createElement(y,null)),e.createElement(V,{tab:"D2ModuleRefCu",key:"D2ModuleRefCu"},e.createElement(_,null)),e.createElement(V,{tab:"D3ModuleConn",key:"D3ModuleConn"},e.createElement(N,null)),e.createElement(V,{tab:"D4ModuleConnRefCu",key:"D4ModuleConnRefCu"},e.createElement(I,null)),e.createElement(V,{tab:"DemoTable",key:"DemoTable"},e.createElement(R,null))))}));export default L;
