import{r as e,af as t}from"./vendor.b6c75cde.js";import{u as n,C as l,D as o,a as c,b as a,c as r}from"./index.d89c0146.js";import{T as u}from"./index.9529e4dc.js";var s="_row_so8yo_1",m="_value_so8yo_21",d="_button_so8yo_37",i="_textbox_so8yo_69",E="_asyncButton_so8yo_101 _button_so8yo_37",p="_normalButton_so8yo_113 _button_so8yo_37";function b(){const t=n(l),{state:o,moduleComputed:c,mr:a}=t;return console.log(a),e.createElement("div",null,e.createElement("div",{className:s},e.createElement("button",{className:d,"aria-label":"Increment value",onClick:a.increment},"+"),e.createElement("span",{className:m},o.value),e.createElement("span",{className:m},"doubleCount: ",c.doubleCount),e.createElement("button",{className:d,"aria-label":"Decrement value",onClick:a.decrementOne},"-")),e.createElement("div",{className:s},e.createElement("input",{className:i,"aria-label":"Set increment amount",value:o.toInc,onChange:e=>a.setState({toInc:Number(e.target.value)||0})}),e.createElement("button",{className:d,onClick:a.increment},"Add Amount"),e.createElement("button",{className:E,onClick:a.incrementAsync},"Add Async"),e.createElement("button",{className:p,onClick:a.incrementBigValue},"Add Big Value")))}const f=e.memo((()=>{const t=n(l),[o,c]=e.useState(!0),{state:a,moduleComputed:r,renderCount:u}=t;return e.createElement("div",null,e.createElement("h2",null,"renderCount ",u),o?e.createElement(e.Fragment,null,e.createElement("span",null," value:",a.value),e.createElement("span",null," bigValue:",a.bigValue),e.createElement("span",null," doubleCount:",r.doubleCount)):"lost dep! module state change will not trigger CounterTip re-render",e.createElement("button",{onClick:()=>c(!o)},"switch CounterTip view"))}));var C=()=>e.createElement("div",null,e.createElement(b,null),e.createElement(f,null));var v=e.memo((function(){const{state:t,mr:l,moduleComputed:c}=n(o);return e.createElement("div",null,e.createElement("p",null,"一个使用了Demo模块的组件"),e.createElement("div",null,t.desc,e.createElement("br",null)," ",c.revesedDesc,e.createElement("button",{onClick:l.changeDesc},"call mr.changeDesc")))}));function g(e){return e.effect((()=>(e.mr.changeDesc(`componentDidMount ${Date.now()}`),()=>console.log("componentWillUnmount"))),[]),{foo:()=>console.log("call setttings.foo")}}var y=e.memo((function(){const{state:n,settings:l,mr:c}=t({module:o,setup:g});return e.createElement("div",null,e.createElement("p",null,"定义组件所属模块"),e.createElement("p",null,"定义setup"),e.createElement("div",null,n.desc,e.createElement("button",{onClick:l.foo},"call settings.foo"),e.createElement("button",{onClick:c.changeDesc},"call mr.changeDesc")))}));const D={borderStyle:e=>e.isOpen?{border:"6px solid red"}:{border:"6px solid blue"}};function h(){return{isOpen:!0}}function _(e){return e.initState(h),e.computed(D),e.effect((()=>{e.mr.changeDesc(`componentDidMount ${Date.now()}`)}),[]),{toogleOpen:e.syncBool("isOpen")}}var k=e.memo((function(){const{state:n,settings:l,refComputed:c}=t({module:o,setup:_});return e.createElement("div",{style:c.borderStyle},e.createElement("p",null,"定义组件所属模块"),e.createElement("p",null,"定义setup, 初始化实例私有状态，并对其定义计算函数"),e.createElement("div",null,n.desc,e.createElement("button",{onClick:l.toogleOpen},"toogleOpen")))}));const O=[c,l],M={borderStyle:e=>e.isOpen?{border:"3px solid red"}:{border:"3px solid blue"}};function S(){return{isOpen:!0}}function x(e){return e.initState(S).computed(M),e.effect((()=>{e.mr.changeDesc(`componentDidMount ${Date.now()}`)}),[]),{toogleOpen:()=>e.syncBool("isOpen")}}var N=e.memo((function(){const{state:n,settings:l,refComputed:c,connectedState:a}=t({module:o,setup:x,connect:O});return e.createElement("div",{style:c.borderStyle},e.createElement("p",null,"定义组件所属模块"),e.createElement("p",null,"定义组件连接其他多个模块"),e.createElement("p",null,"定义setup, 初始化实例私有状态，并对其定义计算函数"),e.createElement("div",null,e.createElement("h3",null,"state.desc ",n.desc),e.createElement("h3",null,"cstate.Counter.value ",a.Counter.value),e.createElement("h3",null,"cstate.DemoCloned.desc ",a.DemoCloned.desc),e.createElement("button",{onClick:l.toogleOpen},"toogleOpen")))}));const T=[c,l],w={borderStyle:e=>e.isOpen?{border:"6px solid red"}:{border:"6px solid blue"}};function A(){return{isOpen:!0}}function B(e){return e.initState(A).computed(w),e.effect((()=>{e.mr.changeDesc(`componentDidMount ${Date.now()}`)}),[]),{toogleOpen:e.syncBool("isOpen")}}var I=e.memo((function(){const{state:n,settings:l,refComputed:c,connectedState:a}=t({module:o,setup:B,connect:T});return e.createElement("div",{style:c.borderStyle},e.createElement("p",null,"定义组件所属模块"),e.createElement("p",null,"定义组件连接其他多个模块"),e.createElement("p",null,"定义setup, 初始化实例私有状态，并对其定义计算函数"),e.createElement("div",null,e.createElement("h3",null,"state.desc: ",n.desc),e.createElement("h3",null,"cstate.Counter.value: ",a.Counter.value),e.createElement("h3",null,"cstate.DemoCloned.desc: ",a.DemoCloned.desc),e.createElement("button",{onClick:l.toogleOpen},"toogleOpen")))}));function K(e){return{columns:[{key:"id",dataIndex:"id",title:"id"},{key:"text",dataIndex:"text",title:"文案"},{key:"done",dataIndex:"done",title:"是否完成",render:e=>e?"done":"uncomplish"}],refreshTable:()=>{e.emit(["refreshTable","todoTable"])},fetchList:e=>r.DemoModel.fetchList(e)}}var R=e.memo((function(){const{settings:n}=t({setup:K});return e.createElement("div",null,e.createElement("button",{onClick:n.refreshTable},"refresh"),e.createElement(a,{tid:"todoTable",columns:n.columns,fetchFn:n.fetchList}))}));const{TabPane:V}=u;function W(){return{selectedKey:"CounterWithModel"}}function $(e){return e.initState(W),{changeSelectedKey:t=>{e.setState({selectedKey:t})}}}var j=e.memo((function(n){const{settings:l,state:o}=t({setup:$});return e.createElement("div",null,e.createElement(u,{defaultActiveKey:"1",onChange:e=>{l.changeSelectedKey(e)}},e.createElement(V,{tab:"CounterWithModel",key:"CounterWithModel"},e.createElement(C,null)),e.createElement(V,{tab:"D0Module",key:"D0Module"},e.createElement(v,null)),e.createElement(V,{tab:"D1Module",key:"D1Module"},e.createElement(y,null)),e.createElement(V,{tab:"D2ModuleRefCu",key:"D2ModuleRefCu"},e.createElement(k,null)),e.createElement(V,{tab:"D3ModuleConn",key:"D3ModuleConn"},e.createElement(N,null)),e.createElement(V,{tab:"D4ModuleConnRefCu",key:"D4ModuleConnRefCu"},e.createElement(I,null)),e.createElement(V,{tab:"DemoTable",key:"DemoTable"},e.createElement(R,null))))}));export default j;
